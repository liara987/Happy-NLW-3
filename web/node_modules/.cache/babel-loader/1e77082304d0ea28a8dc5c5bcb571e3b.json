{"ast":null,"code":"\"use strict\";\n\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Control } from 'leaflet';\nimport React, { cloneElement, Component, Children, Fragment } from 'react';\nimport { LeafletProvider, withLeaflet } from './context';\nimport MapControl from './MapControl'; // Abtract class for layer container, extended by BaseLayer and Overlay\n\nexport var ControlledLayer = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ControlledLayer, _Component);\n\n  function ControlledLayer() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"contextValue\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"layer\", void 0);\n\n    return _this;\n  }\n\n  var _proto = ControlledLayer.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate(_ref) {\n    var checked = _ref.checked;\n\n    if (this.props.leaflet.map == null) {\n      return;\n    } // Handle dynamically (un)checking the layer => adding/removing from the map\n\n\n    if (this.props.checked === true && (checked == null || checked === false)) {\n      this.props.leaflet.map.addLayer(this.layer);\n    } else if (checked === true && (this.props.checked == null || this.props.checked === false)) {\n      this.props.leaflet.map.removeLayer(this.layer);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.props.removeLayerControl(this.layer);\n  };\n\n  _proto.addLayer = function addLayer() {\n    throw new Error('Must be implemented in extending class');\n  };\n\n  _proto.removeLayer = function removeLayer(layer) {\n    this.props.removeLayer(layer);\n  };\n\n  _proto.render = function render() {\n    var children = this.props.children;\n    return children ? /*#__PURE__*/React.createElement(LeafletProvider, {\n      value: this.contextValue\n    }, children) : null;\n  };\n\n  return ControlledLayer;\n}(Component);\n\nvar BaseLayer = /*#__PURE__*/function (_ControlledLayer) {\n  _inheritsLoose(BaseLayer, _ControlledLayer);\n\n  function BaseLayer(props) {\n    var _this2;\n\n    _this2 = _ControlledLayer.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this2), \"addLayer\", function (layer) {\n      _this2.layer = layer; // Keep layer reference to handle dynamic changes of props\n\n      var _this2$props = _this2.props,\n          addBaseLayer = _this2$props.addBaseLayer,\n          checked = _this2$props.checked,\n          name = _this2$props.name;\n      addBaseLayer(layer, name, checked);\n    });\n\n    _this2.contextValue = _extends(_extends({}, props.leaflet), {}, {\n      layerContainer: {\n        addLayer: _this2.addLayer.bind(_assertThisInitialized(_this2)),\n        removeLayer: _this2.removeLayer.bind(_assertThisInitialized(_this2))\n      }\n    });\n    return _this2;\n  }\n\n  return BaseLayer;\n}(ControlledLayer);\n\nvar Overlay = /*#__PURE__*/function (_ControlledLayer2) {\n  _inheritsLoose(Overlay, _ControlledLayer2);\n\n  function Overlay(props) {\n    var _this3;\n\n    _this3 = _ControlledLayer2.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this3), \"addLayer\", function (layer) {\n      _this3.layer = layer; // Keep layer reference to handle dynamic changes of props\n\n      var _this3$props = _this3.props,\n          addOverlay = _this3$props.addOverlay,\n          checked = _this3$props.checked,\n          name = _this3$props.name;\n      addOverlay(layer, name, checked);\n    });\n\n    _this3.contextValue = _extends(_extends({}, props.leaflet), {}, {\n      layerContainer: {\n        addLayer: _this3.addLayer.bind(_assertThisInitialized(_this3)),\n        removeLayer: _this3.removeLayer.bind(_assertThisInitialized(_this3))\n      }\n    });\n    return _this3;\n  }\n\n  return Overlay;\n}(ControlledLayer);\n\nvar LayersControl = /*#__PURE__*/function (_MapControl) {\n  _inheritsLoose(LayersControl, _MapControl);\n\n  function LayersControl(props) {\n    var _this4;\n\n    _this4 = _MapControl.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this4), \"controlProps\", void 0);\n\n    _this4.controlProps = {\n      addBaseLayer: _this4.addBaseLayer.bind(_assertThisInitialized(_this4)),\n      addOverlay: _this4.addOverlay.bind(_assertThisInitialized(_this4)),\n      leaflet: props.leaflet,\n      removeLayer: _this4.removeLayer.bind(_assertThisInitialized(_this4)),\n      removeLayerControl: _this4.removeLayerControl.bind(_assertThisInitialized(_this4))\n    };\n    return _this4;\n  }\n\n  var _proto2 = LayersControl.prototype;\n\n  _proto2.createLeafletElement = function createLeafletElement(props) {\n    var _children = props.children,\n        options = _objectWithoutPropertiesLoose(props, [\"children\"]);\n\n    return new Control.Layers(undefined, undefined, options);\n  };\n\n  _proto2.updateLeafletElement = function updateLeafletElement(fromProps, toProps) {\n    _MapControl.prototype.updateLeafletElement.call(this, fromProps, toProps);\n\n    if (toProps.collapsed !== fromProps.collapsed) {\n      if (toProps.collapsed === true) {\n        this.leafletElement.collapse();\n      } else {\n        this.leafletElement.expand();\n      }\n    }\n  };\n\n  _proto2.componentWillUnmount = function componentWillUnmount() {\n    var _this5 = this;\n\n    setTimeout(function () {\n      _MapControl.prototype.componentWillUnmount.call(_this5);\n    }, 0);\n  };\n\n  _proto2.addBaseLayer = function addBaseLayer(layer, name, checked) {\n    if (checked === void 0) {\n      checked = false;\n    }\n\n    if (checked && this.props.leaflet.map != null) {\n      this.props.leaflet.map.addLayer(layer);\n    }\n\n    this.leafletElement.addBaseLayer(layer, name);\n  };\n\n  _proto2.addOverlay = function addOverlay(layer, name, checked) {\n    if (checked === void 0) {\n      checked = false;\n    }\n\n    if (checked && this.props.leaflet.map != null) {\n      this.props.leaflet.map.addLayer(layer);\n    }\n\n    this.leafletElement.addOverlay(layer, name);\n  };\n\n  _proto2.removeLayer = function removeLayer(layer) {\n    if (this.props.leaflet.map != null) {\n      this.props.leaflet.map.removeLayer(layer);\n    }\n  };\n\n  _proto2.removeLayerControl = function removeLayerControl(layer) {\n    this.leafletElement.removeLayer(layer);\n  };\n\n  _proto2.render = function render() {\n    var _this6 = this;\n\n    var children = Children.map(this.props.children, function (child) {\n      return child ? cloneElement(child, _this6.controlProps) : null;\n    });\n    return /*#__PURE__*/React.createElement(Fragment, null, children);\n  };\n\n  return LayersControl;\n}(MapControl);\n\nvar LayersControlExport = withLeaflet(LayersControl);\nLayersControlExport.BaseLayer = BaseLayer;\nLayersControlExport.Overlay = Overlay;\nexport default LayersControlExport;","map":{"version":3,"sources":["/home/lipereira/projects/NLW/web/node_modules/react-leaflet/es/LayersControl.js"],"names":["_objectWithoutPropertiesLoose","_extends","_assertThisInitialized","_inheritsLoose","_defineProperty","Control","React","cloneElement","Component","Children","Fragment","LeafletProvider","withLeaflet","MapControl","ControlledLayer","_Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","_proto","prototype","componentDidUpdate","_ref","checked","props","leaflet","map","addLayer","layer","removeLayer","componentWillUnmount","removeLayerControl","Error","render","children","createElement","value","contextValue","BaseLayer","_ControlledLayer","_this2","_this2$props","addBaseLayer","name","layerContainer","bind","Overlay","_ControlledLayer2","_this3","_this3$props","addOverlay","LayersControl","_MapControl","_this4","controlProps","_proto2","createLeafletElement","_children","options","Layers","undefined","updateLeafletElement","fromProps","toProps","collapsed","leafletElement","collapse","expand","_this5","setTimeout","_this6","child","LayersControlExport"],"mappings":"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","sourcesContent":["\"use strict\";\n\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Control } from 'leaflet';\nimport React, { cloneElement, Component, Children, Fragment } from 'react';\nimport { LeafletProvider, withLeaflet } from './context';\nimport MapControl from './MapControl';\n// Abtract class for layer container, extended by BaseLayer and Overlay\nexport var ControlledLayer = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ControlledLayer, _Component);\n\n  function ControlledLayer() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"contextValue\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"layer\", void 0);\n\n    return _this;\n  }\n\n  var _proto = ControlledLayer.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate(_ref) {\n    var checked = _ref.checked;\n\n    if (this.props.leaflet.map == null) {\n      return;\n    } // Handle dynamically (un)checking the layer => adding/removing from the map\n\n\n    if (this.props.checked === true && (checked == null || checked === false)) {\n      this.props.leaflet.map.addLayer(this.layer);\n    } else if (checked === true && (this.props.checked == null || this.props.checked === false)) {\n      this.props.leaflet.map.removeLayer(this.layer);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.props.removeLayerControl(this.layer);\n  };\n\n  _proto.addLayer = function addLayer() {\n    throw new Error('Must be implemented in extending class');\n  };\n\n  _proto.removeLayer = function removeLayer(layer) {\n    this.props.removeLayer(layer);\n  };\n\n  _proto.render = function render() {\n    var children = this.props.children;\n    return children ? /*#__PURE__*/React.createElement(LeafletProvider, {\n      value: this.contextValue\n    }, children) : null;\n  };\n\n  return ControlledLayer;\n}(Component);\n\nvar BaseLayer = /*#__PURE__*/function (_ControlledLayer) {\n  _inheritsLoose(BaseLayer, _ControlledLayer);\n\n  function BaseLayer(props) {\n    var _this2;\n\n    _this2 = _ControlledLayer.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this2), \"addLayer\", function (layer) {\n      _this2.layer = layer; // Keep layer reference to handle dynamic changes of props\n\n      var _this2$props = _this2.props,\n          addBaseLayer = _this2$props.addBaseLayer,\n          checked = _this2$props.checked,\n          name = _this2$props.name;\n      addBaseLayer(layer, name, checked);\n    });\n\n    _this2.contextValue = _extends(_extends({}, props.leaflet), {}, {\n      layerContainer: {\n        addLayer: _this2.addLayer.bind(_assertThisInitialized(_this2)),\n        removeLayer: _this2.removeLayer.bind(_assertThisInitialized(_this2))\n      }\n    });\n    return _this2;\n  }\n\n  return BaseLayer;\n}(ControlledLayer);\n\nvar Overlay = /*#__PURE__*/function (_ControlledLayer2) {\n  _inheritsLoose(Overlay, _ControlledLayer2);\n\n  function Overlay(props) {\n    var _this3;\n\n    _this3 = _ControlledLayer2.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this3), \"addLayer\", function (layer) {\n      _this3.layer = layer; // Keep layer reference to handle dynamic changes of props\n\n      var _this3$props = _this3.props,\n          addOverlay = _this3$props.addOverlay,\n          checked = _this3$props.checked,\n          name = _this3$props.name;\n      addOverlay(layer, name, checked);\n    });\n\n    _this3.contextValue = _extends(_extends({}, props.leaflet), {}, {\n      layerContainer: {\n        addLayer: _this3.addLayer.bind(_assertThisInitialized(_this3)),\n        removeLayer: _this3.removeLayer.bind(_assertThisInitialized(_this3))\n      }\n    });\n    return _this3;\n  }\n\n  return Overlay;\n}(ControlledLayer);\n\nvar LayersControl = /*#__PURE__*/function (_MapControl) {\n  _inheritsLoose(LayersControl, _MapControl);\n\n  function LayersControl(props) {\n    var _this4;\n\n    _this4 = _MapControl.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this4), \"controlProps\", void 0);\n\n    _this4.controlProps = {\n      addBaseLayer: _this4.addBaseLayer.bind(_assertThisInitialized(_this4)),\n      addOverlay: _this4.addOverlay.bind(_assertThisInitialized(_this4)),\n      leaflet: props.leaflet,\n      removeLayer: _this4.removeLayer.bind(_assertThisInitialized(_this4)),\n      removeLayerControl: _this4.removeLayerControl.bind(_assertThisInitialized(_this4))\n    };\n    return _this4;\n  }\n\n  var _proto2 = LayersControl.prototype;\n\n  _proto2.createLeafletElement = function createLeafletElement(props) {\n    var _children = props.children,\n        options = _objectWithoutPropertiesLoose(props, [\"children\"]);\n\n    return new Control.Layers(undefined, undefined, options);\n  };\n\n  _proto2.updateLeafletElement = function updateLeafletElement(fromProps, toProps) {\n    _MapControl.prototype.updateLeafletElement.call(this, fromProps, toProps);\n\n    if (toProps.collapsed !== fromProps.collapsed) {\n      if (toProps.collapsed === true) {\n        this.leafletElement.collapse();\n      } else {\n        this.leafletElement.expand();\n      }\n    }\n  };\n\n  _proto2.componentWillUnmount = function componentWillUnmount() {\n    var _this5 = this;\n\n    setTimeout(function () {\n      _MapControl.prototype.componentWillUnmount.call(_this5);\n    }, 0);\n  };\n\n  _proto2.addBaseLayer = function addBaseLayer(layer, name, checked) {\n    if (checked === void 0) {\n      checked = false;\n    }\n\n    if (checked && this.props.leaflet.map != null) {\n      this.props.leaflet.map.addLayer(layer);\n    }\n\n    this.leafletElement.addBaseLayer(layer, name);\n  };\n\n  _proto2.addOverlay = function addOverlay(layer, name, checked) {\n    if (checked === void 0) {\n      checked = false;\n    }\n\n    if (checked && this.props.leaflet.map != null) {\n      this.props.leaflet.map.addLayer(layer);\n    }\n\n    this.leafletElement.addOverlay(layer, name);\n  };\n\n  _proto2.removeLayer = function removeLayer(layer) {\n    if (this.props.leaflet.map != null) {\n      this.props.leaflet.map.removeLayer(layer);\n    }\n  };\n\n  _proto2.removeLayerControl = function removeLayerControl(layer) {\n    this.leafletElement.removeLayer(layer);\n  };\n\n  _proto2.render = function render() {\n    var _this6 = this;\n\n    var children = Children.map(this.props.children, function (child) {\n      return child ? cloneElement(child, _this6.controlProps) : null;\n    });\n    return /*#__PURE__*/React.createElement(Fragment, null, children);\n  };\n\n  return LayersControl;\n}(MapControl);\n\nvar LayersControlExport = withLeaflet(LayersControl);\nLayersControlExport.BaseLayer = BaseLayer;\nLayersControlExport.Overlay = Overlay;\nexport default LayersControlExport;"]},"metadata":{},"sourceType":"module"}