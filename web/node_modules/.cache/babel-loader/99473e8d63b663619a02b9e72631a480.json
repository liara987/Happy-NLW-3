{"ast":null,"code":"\"use strict\";\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { latLngBounds, Map as LeafletMap } from 'leaflet';\nimport React from 'react';\nimport { LeafletProvider } from './context';\nimport MapEvented from './MapEvented';\nimport updateClassName from './utils/updateClassName';\nimport omit from './utils/omit';\nvar OTHER_PROPS = ['children', 'className', 'id', 'style', 'useFlyTo', 'whenReady'];\n\nvar normalizeCenter = function normalizeCenter(pos) {\n  return Array.isArray(pos) ? [pos[0], pos[1]] : [pos.lat, pos.lon ? pos.lon : pos.lng];\n};\n\nvar Map = /*#__PURE__*/function (_MapEvented) {\n  _inheritsLoose(Map, _MapEvented);\n\n  function Map(props) {\n    var _this;\n\n    _this = _MapEvented.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"className\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"contextValue\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"container\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"viewport\", {\n      center: undefined,\n      zoom: undefined\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_ready\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"_updating\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"onViewportChange\", function () {\n      var center = _this.leafletElement.getCenter();\n\n      _this.viewport = {\n        center: center ? [center.lat, center.lng] : undefined,\n        zoom: _this.leafletElement.getZoom()\n      };\n\n      if (_this.props.onViewportChange && !_this._updating) {\n        _this.props.onViewportChange(_this.viewport);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onViewportChanged\", function () {\n      if (_this.props.onViewportChanged && !_this._updating) {\n        _this.props.onViewportChanged(_this.viewport);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"bindContainer\", function (container) {\n      _this.container = container;\n    });\n\n    _this.className = props.className;\n    return _this;\n  }\n\n  var _proto = Map.prototype;\n\n  _proto.createLeafletElement = function createLeafletElement(props) {\n    var viewport = props.viewport,\n        options = _objectWithoutPropertiesLoose(props, [\"viewport\"]);\n\n    if (viewport) {\n      if (viewport.center) {\n        options.center = viewport.center;\n      }\n\n      if (typeof viewport.zoom === 'number') {\n        options.zoom = viewport.zoom;\n      }\n    }\n\n    return new LeafletMap(this.container, options);\n  };\n\n  _proto.updateLeafletElement = function updateLeafletElement(fromProps, toProps) {\n    this._updating = true;\n    var bounds = toProps.bounds,\n        boundsOptions = toProps.boundsOptions,\n        boxZoom = toProps.boxZoom,\n        center = toProps.center,\n        className = toProps.className,\n        doubleClickZoom = toProps.doubleClickZoom,\n        dragging = toProps.dragging,\n        keyboard = toProps.keyboard,\n        maxBounds = toProps.maxBounds,\n        scrollWheelZoom = toProps.scrollWheelZoom,\n        tap = toProps.tap,\n        touchZoom = toProps.touchZoom,\n        useFlyTo = toProps.useFlyTo,\n        viewport = toProps.viewport,\n        zoom = toProps.zoom;\n    updateClassName(this.container, fromProps.className, className);\n\n    if (viewport && viewport !== fromProps.viewport) {\n      var c = viewport.center ? viewport.center : center;\n      var z = viewport.zoom == null ? zoom : viewport.zoom;\n\n      if (useFlyTo === true) {\n        this.leafletElement.flyTo(c, z, this.getZoomPanOptions(toProps));\n      } else {\n        this.leafletElement.setView(c, z, this.getZoomPanOptions(toProps));\n      }\n    } else if (center && this.shouldUpdateCenter(center, fromProps.center)) {\n      if (useFlyTo === true) {\n        this.leafletElement.flyTo(center, zoom, this.getZoomPanOptions(toProps));\n      } else {\n        this.leafletElement.setView(center, zoom, this.getZoomPanOptions(toProps));\n      }\n    } else if (typeof zoom === 'number' && zoom !== fromProps.zoom) {\n      if (fromProps.zoom == null) {\n        this.leafletElement.setView(center, zoom, this.getZoomPanOptions(toProps));\n      } else {\n        this.leafletElement.setZoom(zoom, this.getZoomPanOptions(toProps));\n      }\n    }\n\n    if (maxBounds && this.shouldUpdateBounds(maxBounds, fromProps.maxBounds)) {\n      this.leafletElement.setMaxBounds(maxBounds);\n    }\n\n    if (bounds && (this.shouldUpdateBounds(bounds, fromProps.bounds) || boundsOptions !== fromProps.boundsOptions)) {\n      if (useFlyTo === true) {\n        this.leafletElement.flyToBounds(bounds, this.getFitBoundsOptions(toProps));\n      } else {\n        this.leafletElement.fitBounds(bounds, this.getFitBoundsOptions(toProps));\n      }\n    }\n\n    if (boxZoom !== fromProps.boxZoom) {\n      if (boxZoom === true) {\n        this.leafletElement.boxZoom.enable();\n      } else {\n        this.leafletElement.boxZoom.disable();\n      }\n    }\n\n    if (doubleClickZoom !== fromProps.doubleClickZoom) {\n      if (doubleClickZoom === true || typeof doubleClickZoom === 'string') {\n        this.leafletElement.options.doubleClickZoom = doubleClickZoom;\n        this.leafletElement.doubleClickZoom.enable();\n      } else {\n        this.leafletElement.doubleClickZoom.disable();\n      }\n    }\n\n    if (dragging !== fromProps.dragging) {\n      if (dragging === true) {\n        this.leafletElement.dragging.enable();\n      } else {\n        this.leafletElement.dragging.disable();\n      }\n    }\n\n    if (keyboard !== fromProps.keyboard) {\n      if (keyboard === true) {\n        this.leafletElement.keyboard.enable();\n      } else {\n        this.leafletElement.keyboard.disable();\n      }\n    }\n\n    if (scrollWheelZoom !== fromProps.scrollWheelZoom) {\n      if (scrollWheelZoom === true || typeof scrollWheelZoom === 'string') {\n        this.leafletElement.options.scrollWheelZoom = scrollWheelZoom;\n        this.leafletElement.scrollWheelZoom.enable();\n      } else {\n        this.leafletElement.scrollWheelZoom.disable();\n      }\n    }\n\n    if (tap !== fromProps.tap) {\n      if (tap === true) {\n        this.leafletElement.tap.enable();\n      } else {\n        this.leafletElement.tap.disable();\n      }\n    }\n\n    if (touchZoom !== fromProps.touchZoom) {\n      if (touchZoom === true || typeof touchZoom === 'string') {\n        this.leafletElement.options.touchZoom = touchZoom;\n        this.leafletElement.touchZoom.enable();\n      } else {\n        this.leafletElement.touchZoom.disable();\n      }\n    }\n\n    this._updating = false;\n  };\n\n  _proto.getZoomPanOptions = function getZoomPanOptions(props) {\n    var animate = props.animate,\n        duration = props.duration,\n        easeLinearity = props.easeLinearity,\n        noMoveStart = props.noMoveStart;\n    return {\n      animate: animate,\n      duration: duration,\n      easeLinearity: easeLinearity,\n      noMoveStart: noMoveStart\n    };\n  };\n\n  _proto.getFitBoundsOptions = function getFitBoundsOptions(props) {\n    var zoomPanOptions = this.getZoomPanOptions(props);\n    return _extends(_extends({}, zoomPanOptions), props.boundsOptions);\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    var props = omit.apply(void 0, [this.props].concat(OTHER_PROPS));\n    this.leafletElement = this.createLeafletElement(props);\n    this.leafletElement.on('move', this.onViewportChange);\n    this.leafletElement.on('moveend', this.onViewportChanged);\n\n    if (props.bounds != null) {\n      this.leafletElement.fitBounds(props.bounds, this.getFitBoundsOptions(props));\n    }\n\n    this.contextValue = {\n      layerContainer: this.leafletElement,\n      map: this.leafletElement\n    };\n\n    _MapEvented.prototype.componentDidMount.call(this);\n\n    this.forceUpdate(); // Re-render now that leafletElement is created\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this._ready === false) {\n      this._ready = true;\n\n      if (this.props.whenReady) {\n        this.leafletElement.whenReady(this.props.whenReady);\n      }\n    }\n\n    _MapEvented.prototype.componentDidUpdate.call(this, prevProps);\n\n    this.updateLeafletElement(prevProps, this.props);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    _MapEvented.prototype.componentWillUnmount.call(this);\n\n    this.leafletElement.off('move', this.onViewportChange);\n    this.leafletElement.off('moveend', this.onViewportChanged); // The canvas renderer uses requestAnimationFrame, making a deferred call to a deleted object\n    // When preferCanvas is set, use simpler teardown logic\n\n    if (this.props.preferCanvas === true) {\n      this.leafletElement._initEvents(true);\n\n      this.leafletElement._stop();\n    } else {\n      this.leafletElement.remove();\n    }\n  };\n\n  _proto.shouldUpdateCenter = function shouldUpdateCenter(next, prev) {\n    if (!prev) return true;\n    next = normalizeCenter(next);\n    prev = normalizeCenter(prev);\n    return next[0] !== prev[0] || next[1] !== prev[1];\n  };\n\n  _proto.shouldUpdateBounds = function shouldUpdateBounds(next, prev) {\n    return prev ? !latLngBounds(next).equals(latLngBounds(prev)) : true;\n  };\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: this.className,\n      id: this.props.id,\n      ref: this.bindContainer,\n      style: this.props.style\n    }, this.contextValue ? /*#__PURE__*/React.createElement(LeafletProvider, {\n      value: this.contextValue\n    }, this.props.children) : null);\n  };\n\n  return Map;\n}(MapEvented);\n\nexport { Map as default };","map":{"version":3,"sources":["/home/lipereira/projects/NLW/web/node_modules/react-leaflet/es/Map.js"],"names":["_extends","_objectWithoutPropertiesLoose","_assertThisInitialized","_inheritsLoose","_defineProperty","latLngBounds","Map","LeafletMap","React","LeafletProvider","MapEvented","updateClassName","omit","OTHER_PROPS","normalizeCenter","pos","Array","isArray","lat","lon","lng","_MapEvented","props","_this","call","center","undefined","zoom","leafletElement","getCenter","viewport","getZoom","onViewportChange","_updating","onViewportChanged","container","className","_proto","prototype","createLeafletElement","options","updateLeafletElement","fromProps","toProps","bounds","boundsOptions","boxZoom","doubleClickZoom","dragging","keyboard","maxBounds","scrollWheelZoom","tap","touchZoom","useFlyTo","c","z","flyTo","getZoomPanOptions","setView","shouldUpdateCenter","setZoom","shouldUpdateBounds","setMaxBounds","flyToBounds","getFitBoundsOptions","fitBounds","enable","disable","animate","duration","easeLinearity","noMoveStart","zoomPanOptions","componentDidMount","apply","concat","on","contextValue","layerContainer","map","forceUpdate","componentDidUpdate","prevProps","_ready","whenReady","componentWillUnmount","off","preferCanvas","_initEvents","_stop","remove","next","prev","equals","render","createElement","id","ref","bindContainer","style","value","children","default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { latLngBounds, Map as LeafletMap } from 'leaflet';\nimport React from 'react';\nimport { LeafletProvider } from './context';\nimport MapEvented from './MapEvented';\nimport updateClassName from './utils/updateClassName';\nimport omit from './utils/omit';\nvar OTHER_PROPS = ['children', 'className', 'id', 'style', 'useFlyTo', 'whenReady'];\n\nvar normalizeCenter = function normalizeCenter(pos) {\n  return Array.isArray(pos) ? [pos[0], pos[1]] : [pos.lat, pos.lon ? pos.lon : pos.lng];\n};\n\nvar Map = /*#__PURE__*/function (_MapEvented) {\n  _inheritsLoose(Map, _MapEvented);\n\n  function Map(props) {\n    var _this;\n\n    _this = _MapEvented.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"className\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"contextValue\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"container\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"viewport\", {\n      center: undefined,\n      zoom: undefined\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_ready\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"_updating\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"onViewportChange\", function () {\n      var center = _this.leafletElement.getCenter();\n\n      _this.viewport = {\n        center: center ? [center.lat, center.lng] : undefined,\n        zoom: _this.leafletElement.getZoom()\n      };\n\n      if (_this.props.onViewportChange && !_this._updating) {\n        _this.props.onViewportChange(_this.viewport);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onViewportChanged\", function () {\n      if (_this.props.onViewportChanged && !_this._updating) {\n        _this.props.onViewportChanged(_this.viewport);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"bindContainer\", function (container) {\n      _this.container = container;\n    });\n\n    _this.className = props.className;\n    return _this;\n  }\n\n  var _proto = Map.prototype;\n\n  _proto.createLeafletElement = function createLeafletElement(props) {\n    var viewport = props.viewport,\n        options = _objectWithoutPropertiesLoose(props, [\"viewport\"]);\n\n    if (viewport) {\n      if (viewport.center) {\n        options.center = viewport.center;\n      }\n\n      if (typeof viewport.zoom === 'number') {\n        options.zoom = viewport.zoom;\n      }\n    }\n\n    return new LeafletMap(this.container, options);\n  };\n\n  _proto.updateLeafletElement = function updateLeafletElement(fromProps, toProps) {\n    this._updating = true;\n    var bounds = toProps.bounds,\n        boundsOptions = toProps.boundsOptions,\n        boxZoom = toProps.boxZoom,\n        center = toProps.center,\n        className = toProps.className,\n        doubleClickZoom = toProps.doubleClickZoom,\n        dragging = toProps.dragging,\n        keyboard = toProps.keyboard,\n        maxBounds = toProps.maxBounds,\n        scrollWheelZoom = toProps.scrollWheelZoom,\n        tap = toProps.tap,\n        touchZoom = toProps.touchZoom,\n        useFlyTo = toProps.useFlyTo,\n        viewport = toProps.viewport,\n        zoom = toProps.zoom;\n    updateClassName(this.container, fromProps.className, className);\n\n    if (viewport && viewport !== fromProps.viewport) {\n      var c = viewport.center ? viewport.center : center;\n      var z = viewport.zoom == null ? zoom : viewport.zoom;\n\n      if (useFlyTo === true) {\n        this.leafletElement.flyTo(c, z, this.getZoomPanOptions(toProps));\n      } else {\n        this.leafletElement.setView(c, z, this.getZoomPanOptions(toProps));\n      }\n    } else if (center && this.shouldUpdateCenter(center, fromProps.center)) {\n      if (useFlyTo === true) {\n        this.leafletElement.flyTo(center, zoom, this.getZoomPanOptions(toProps));\n      } else {\n        this.leafletElement.setView(center, zoom, this.getZoomPanOptions(toProps));\n      }\n    } else if (typeof zoom === 'number' && zoom !== fromProps.zoom) {\n      if (fromProps.zoom == null) {\n        this.leafletElement.setView(center, zoom, this.getZoomPanOptions(toProps));\n      } else {\n        this.leafletElement.setZoom(zoom, this.getZoomPanOptions(toProps));\n      }\n    }\n\n    if (maxBounds && this.shouldUpdateBounds(maxBounds, fromProps.maxBounds)) {\n      this.leafletElement.setMaxBounds(maxBounds);\n    }\n\n    if (bounds && (this.shouldUpdateBounds(bounds, fromProps.bounds) || boundsOptions !== fromProps.boundsOptions)) {\n      if (useFlyTo === true) {\n        this.leafletElement.flyToBounds(bounds, this.getFitBoundsOptions(toProps));\n      } else {\n        this.leafletElement.fitBounds(bounds, this.getFitBoundsOptions(toProps));\n      }\n    }\n\n    if (boxZoom !== fromProps.boxZoom) {\n      if (boxZoom === true) {\n        this.leafletElement.boxZoom.enable();\n      } else {\n        this.leafletElement.boxZoom.disable();\n      }\n    }\n\n    if (doubleClickZoom !== fromProps.doubleClickZoom) {\n      if (doubleClickZoom === true || typeof doubleClickZoom === 'string') {\n        this.leafletElement.options.doubleClickZoom = doubleClickZoom;\n        this.leafletElement.doubleClickZoom.enable();\n      } else {\n        this.leafletElement.doubleClickZoom.disable();\n      }\n    }\n\n    if (dragging !== fromProps.dragging) {\n      if (dragging === true) {\n        this.leafletElement.dragging.enable();\n      } else {\n        this.leafletElement.dragging.disable();\n      }\n    }\n\n    if (keyboard !== fromProps.keyboard) {\n      if (keyboard === true) {\n        this.leafletElement.keyboard.enable();\n      } else {\n        this.leafletElement.keyboard.disable();\n      }\n    }\n\n    if (scrollWheelZoom !== fromProps.scrollWheelZoom) {\n      if (scrollWheelZoom === true || typeof scrollWheelZoom === 'string') {\n        this.leafletElement.options.scrollWheelZoom = scrollWheelZoom;\n        this.leafletElement.scrollWheelZoom.enable();\n      } else {\n        this.leafletElement.scrollWheelZoom.disable();\n      }\n    }\n\n    if (tap !== fromProps.tap) {\n      if (tap === true) {\n        this.leafletElement.tap.enable();\n      } else {\n        this.leafletElement.tap.disable();\n      }\n    }\n\n    if (touchZoom !== fromProps.touchZoom) {\n      if (touchZoom === true || typeof touchZoom === 'string') {\n        this.leafletElement.options.touchZoom = touchZoom;\n        this.leafletElement.touchZoom.enable();\n      } else {\n        this.leafletElement.touchZoom.disable();\n      }\n    }\n\n    this._updating = false;\n  };\n\n  _proto.getZoomPanOptions = function getZoomPanOptions(props) {\n    var animate = props.animate,\n        duration = props.duration,\n        easeLinearity = props.easeLinearity,\n        noMoveStart = props.noMoveStart;\n    return {\n      animate: animate,\n      duration: duration,\n      easeLinearity: easeLinearity,\n      noMoveStart: noMoveStart\n    };\n  };\n\n  _proto.getFitBoundsOptions = function getFitBoundsOptions(props) {\n    var zoomPanOptions = this.getZoomPanOptions(props);\n    return _extends(_extends({}, zoomPanOptions), props.boundsOptions);\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    var props = omit.apply(void 0, [this.props].concat(OTHER_PROPS));\n    this.leafletElement = this.createLeafletElement(props);\n    this.leafletElement.on('move', this.onViewportChange);\n    this.leafletElement.on('moveend', this.onViewportChanged);\n\n    if (props.bounds != null) {\n      this.leafletElement.fitBounds(props.bounds, this.getFitBoundsOptions(props));\n    }\n\n    this.contextValue = {\n      layerContainer: this.leafletElement,\n      map: this.leafletElement\n    };\n\n    _MapEvented.prototype.componentDidMount.call(this);\n\n    this.forceUpdate(); // Re-render now that leafletElement is created\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this._ready === false) {\n      this._ready = true;\n\n      if (this.props.whenReady) {\n        this.leafletElement.whenReady(this.props.whenReady);\n      }\n    }\n\n    _MapEvented.prototype.componentDidUpdate.call(this, prevProps);\n\n    this.updateLeafletElement(prevProps, this.props);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    _MapEvented.prototype.componentWillUnmount.call(this);\n\n    this.leafletElement.off('move', this.onViewportChange);\n    this.leafletElement.off('moveend', this.onViewportChanged); // The canvas renderer uses requestAnimationFrame, making a deferred call to a deleted object\n    // When preferCanvas is set, use simpler teardown logic\n\n    if (this.props.preferCanvas === true) {\n      this.leafletElement._initEvents(true);\n\n      this.leafletElement._stop();\n    } else {\n      this.leafletElement.remove();\n    }\n  };\n\n  _proto.shouldUpdateCenter = function shouldUpdateCenter(next, prev) {\n    if (!prev) return true;\n    next = normalizeCenter(next);\n    prev = normalizeCenter(prev);\n    return next[0] !== prev[0] || next[1] !== prev[1];\n  };\n\n  _proto.shouldUpdateBounds = function shouldUpdateBounds(next, prev) {\n    return prev ? !latLngBounds(next).equals(latLngBounds(prev)) : true;\n  };\n\n  _proto.render = function render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: this.className,\n      id: this.props.id,\n      ref: this.bindContainer,\n      style: this.props.style\n    }, this.contextValue ? /*#__PURE__*/React.createElement(LeafletProvider, {\n      value: this.contextValue\n    }, this.props.children) : null);\n  };\n\n  return Map;\n}(MapEvented);\n\nexport { Map as default };"]},"metadata":{},"sourceType":"module"}